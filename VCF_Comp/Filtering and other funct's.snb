{
  "metadata" : {
    "name" : "Filtering and other funct's",
    "user_save_timestamp" : "1970-01-01T00:00:00.000Z",
    "auto_save_timestamp" : "1970-01-01T00:00:00.000Z",
    "language_info" : {
      "name" : "scala",
      "file_extension" : "scala",
      "codemirror_mode" : "text/x-scala"
    },
    "trusted" : true,
    "customLocalRepo" : null,
    "customRepos" : null,
    "customDeps" : null,
    "customImports" : null,
    "customArgs" : null,
    "customSparkConf" : null
  },
  "cells" : [ {
    "metadata" : {
      "id" : "2B42039BFC8A48608C801A561C1C9C23"
    },
    "cell_type" : "markdown",
    "source" : "# Working with VCF files"
  }, {
    "metadata" : {
      "id" : "8E6843C003FA48B08C2E28C9C37111B9"
    },
    "cell_type" : "markdown",
    "source" : "This notebook introduces some commonly needed functions that need to be available on VCF files. Some parts of the this notebook could rightfully be called an [ADAM](http://bdgenomics.org/projects/adam/) primer.\n\nIn this notebook, we cover basic functionality when working with VCF files. Every part should stand on its own, including loading the data from a file. In some cases, functionality is encapsulated in a function.\n\nTOC:\n\n- Loading VCF files\n\n- Contigs\n  - Which contigs are represented in a VCF file\n  - Make a selection based on a contig\n\n- Genes\n  - Which Genes are represented in the annotations of a VCF file?\n  - Make a selection based on a gene\n\n- Display the contents of a selection\n\n- Examining the API\n\n- Export\n  - Export a whole file (excluding annotations)\n  - Export a selection (excluding annotations)\n\n- Merge VCFs\n\n- Filter on _region_\n\n\nTODO:\n\n- Split VCF: splitting based on filter(s) can effecitvely be implemented using the examples below\n"
  }, {
    "metadata" : {
      "id" : "8A68466EC71D4C11874D4793DAF91218"
    },
    "cell_type" : "markdown",
    "source" : "- - - "
  }, {
    "metadata" : {
      "id" : "85BC320DE37C45B7871679A471659CC9"
    },
    "cell_type" : "markdown",
    "source" : "## Preamble\n\nWe start by loading the necessary dependencies:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "output_stream_collapsed" : false,
      "collapsed" : true,
      "id" : "86245CEFE8424C07BADB875146B40CBD"
    },
    "cell_type" : "code",
    "source" : ":remote-repo bintray-tmoerman % default % http://dl.bintray.com/tmoerman/maven % maven",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res2: String = Resolver added: bintray-tmoerman % default % http://dl.bintray.com/tmoerman/maven % maven!\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/plain" : "Resolver added: bintray-tmoerman % default % http://dl.bintray.com/tmoerman/maven % maven!"
      },
      "output_type" : "execute_result",
      "execution_count" : 1
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "output_stream_collapsed" : false,
      "collapsed" : true,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1298453022-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "A3047ABCB33444CC9FACA2E912311391"
    },
    "cell_type" : "code",
    "source" : ":dp org.tmoerman % vcf-comp_2.10 % 0.5.0\n- org.tmoerman      % adam-fx       %   _\n:dp org.tmoerman % adam-fx_2.10 % 0.6.0\n:dp org.bdgenomics.adam % adam-core % 0.19.0\n- org.apache.hadoop % hadoop-client %   _\n- org.apache.spark  %     _         %   _\n- org.scala-lang    %     _         %   _\n- org.scoverage     %     _         %   _\n- joda-time         %     _         %   _",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "globalScope.jars: Array[String] = [Ljava.lang.String;@2a76f1d7\nres6: List[String] = List(/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.code.findbugs/annotations/jars/annotations-2.0.0.jar, /tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.scalaz/scalaz-core_2.10/bundles/scalaz-core_2.10-7.0.6.jar, /tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-api/jars/slf4j-api-1.7.12.jar, /tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/vcf-comp_2.10/jars/vcf-comp_2.10-0.5.0.jar, /tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-scala_2.10/jars/parquet-scala_2.10-1.8.1.jar, /tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/..."
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon3a3355a399213dbbd9ce2082b97cffac&quot;,&quot;dataInit&quot;:[{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.code.findbugs/annotations/jars/annotations-2.0.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.scalaz/scalaz-core_2.10/bundles/scalaz-core_2.10-7.0.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-api/jars/slf4j-api-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/vcf-comp_2.10/jars/vcf-comp_2.10-0.5.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-scala_2.10/jars/parquet-scala_2.10-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.minlog/minlog/jars/minlog-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.guava/guava/bundles/guava-16.0.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.bdg-formats/bdg-formats/jars/bdg-formats-0.7.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.xerial.snappy/snappy-java/bundles/snappy-java-1.1.1.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-metrics_2.10/jars/utils-metrics_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.testng/testng/jars/testng-6.8.8.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-column/jars/parquet-column-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-format/jars/parquet-format-2.3.0-incubating.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-log4j12/jars/slf4j-log4j12-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-common/jars/parquet-common-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-avro/jars/parquet-avro-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-io_2.10/jars/utils-io_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-cli_2.10/jars/utils-cli_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.thoughtworks.paranamer/paranamer/jars/paranamer-2.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-jexl/jars/commons-jexl-2.1.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-compress/jars/commons-compress-1.4.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-apis_2.10/jars/adam-apis_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-io/commons-io/jars/commons-io-1.3.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.kryo/kryo/bundles/kryo-2.24.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.beanshell/bsh/jars/bsh-2.0b4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-jackson/jars/parquet-jackson-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant/jars/ant-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpclient/jars/httpclient-4.5.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/adam-fx_2.10/jars/adam-fx_2.10-0.6.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-core_2.10/jars/adam-core_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-logging/commons-logging/jars/commons-logging-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-cli/commons-cli/jars/commons-cli-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/log4j/log4j/bundles/log4j-1.2.17.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-httpclient/commons-httpclient/jars/commons-httpclient-3.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/it.unimi.dsi/fastutil/jars/fastutil-6.6.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.github.samtools/htsjdk/jars/htsjdk-1.139.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-misc_2.10/jars/utils-misc_2.10-0.2.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-encoding/jars/parquet-encoding-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.seqdoop/hadoop-bam/jars/hadoop-bam-7.1.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-mapper-asl/jars/jackson-mapper-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpcore/jars/httpcore-4.4.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.beust/jcommander/jars/jcommander-1.27.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-hadoop/jars/parquet-hadoop-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-core/jars/servo-core-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/args4j/args4j/bundles/args4j-2.0.31.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.avro/avro/bundles/avro-1.7.7.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-codec/commons-codec/jars/commons-codec-1.9.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-internal/jars/servo-internal-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.objenesis/objenesis/jars/objenesis-2.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tukaani/xz/jars/xz-1.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant-launcher/jars/ant-launcher-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-core-asl/jars/jackson-core-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/lib/common.common-0.6.3-scala-2.10.5-spark-1.6.1-hadoop-2.6.0-with-hive-with-parquet.jar&quot;}],&quot;genId&quot;:&quot;1298453022&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1298453022\"><li>\n                <a href=\"#tab1298453022-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1298453022-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1298453022\"><div class=\"tab-pane\" id=\"tab1298453022-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon2ff59beeba83f4206575951edc164235&quot;,&quot;dataInit&quot;:[{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.code.findbugs/annotations/jars/annotations-2.0.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.scalaz/scalaz-core_2.10/bundles/scalaz-core_2.10-7.0.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-api/jars/slf4j-api-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/vcf-comp_2.10/jars/vcf-comp_2.10-0.5.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-scala_2.10/jars/parquet-scala_2.10-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.minlog/minlog/jars/minlog-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.guava/guava/bundles/guava-16.0.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.bdg-formats/bdg-formats/jars/bdg-formats-0.7.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.xerial.snappy/snappy-java/bundles/snappy-java-1.1.1.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-metrics_2.10/jars/utils-metrics_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.testng/testng/jars/testng-6.8.8.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-column/jars/parquet-column-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-format/jars/parquet-format-2.3.0-incubating.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-log4j12/jars/slf4j-log4j12-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-common/jars/parquet-common-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-avro/jars/parquet-avro-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-io_2.10/jars/utils-io_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-cli_2.10/jars/utils-cli_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.thoughtworks.paranamer/paranamer/jars/paranamer-2.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-jexl/jars/commons-jexl-2.1.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-compress/jars/commons-compress-1.4.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-apis_2.10/jars/adam-apis_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-io/commons-io/jars/commons-io-1.3.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.kryo/kryo/bundles/kryo-2.24.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.beanshell/bsh/jars/bsh-2.0b4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-jackson/jars/parquet-jackson-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant/jars/ant-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpclient/jars/httpclient-4.5.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/adam-fx_2.10/jars/adam-fx_2.10-0.6.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-core_2.10/jars/adam-core_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-logging/commons-logging/jars/commons-logging-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-cli/commons-cli/jars/commons-cli-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/log4j/log4j/bundles/log4j-1.2.17.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-httpclient/commons-httpclient/jars/commons-httpclient-3.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/it.unimi.dsi/fastutil/jars/fastutil-6.6.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.github.samtools/htsjdk/jars/htsjdk-1.139.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-misc_2.10/jars/utils-misc_2.10-0.2.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-encoding/jars/parquet-encoding-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.seqdoop/hadoop-bam/jars/hadoop-bam-7.1.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-mapper-asl/jars/jackson-mapper-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpcore/jars/httpcore-4.4.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.beust/jcommander/jars/jcommander-1.27.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-hadoop/jars/parquet-hadoop-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-core/jars/servo-core-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/args4j/args4j/bundles/args4j-2.0.31.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.avro/avro/bundles/avro-1.7.7.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-codec/commons-codec/jars/commons-codec-1.9.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-internal/jars/servo-internal-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.objenesis/objenesis/jars/objenesis-2.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tukaani/xz/jars/xz-1.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant-launcher/jars/ant-launcher-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-core-asl/jars/jackson-core-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/lib/common.common-0.6.3-scala-2.10.5-spark-1.6.1-hadoop-2.6.0-with-hive-with-parquet.jar&quot;}],&quot;genId&quot;:&quot;2115546968&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"string value\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon65125782dea1ecf5b2072a4ecdf9ae41&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon1024b55af3be392b2c2e9dbfbbfcce2f&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1298453022-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon12011f82c4e0350c6116b5fe9beaf2d1&quot;,&quot;dataInit&quot;:[{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.code.findbugs/annotations/jars/annotations-2.0.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.scalaz/scalaz-core_2.10/bundles/scalaz-core_2.10-7.0.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-api/jars/slf4j-api-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/vcf-comp_2.10/jars/vcf-comp_2.10-0.5.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-scala_2.10/jars/parquet-scala_2.10-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.minlog/minlog/jars/minlog-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.google.guava/guava/bundles/guava-16.0.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.bdg-formats/bdg-formats/jars/bdg-formats-0.7.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.xerial.snappy/snappy-java/bundles/snappy-java-1.1.1.6.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-metrics_2.10/jars/utils-metrics_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.testng/testng/jars/testng-6.8.8.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-column/jars/parquet-column-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-format/jars/parquet-format-2.3.0-incubating.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.slf4j/slf4j-log4j12/jars/slf4j-log4j12-1.7.12.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-common/jars/parquet-common-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-avro/jars/parquet-avro-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-io_2.10/jars/utils-io_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-cli_2.10/jars/utils-cli_2.10-0.2.4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.thoughtworks.paranamer/paranamer/jars/paranamer-2.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-jexl/jars/commons-jexl-2.1.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.commons/commons-compress/jars/commons-compress-1.4.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-apis_2.10/jars/adam-apis_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-io/commons-io/jars/commons-io-1.3.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.esotericsoftware.kryo/kryo/bundles/kryo-2.24.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.beanshell/bsh/jars/bsh-2.0b4.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-jackson/jars/parquet-jackson-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant/jars/ant-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpclient/jars/httpclient-4.5.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tmoerman/adam-fx_2.10/jars/adam-fx_2.10-0.6.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.adam/adam-core_2.10/jars/adam-core_2.10-0.19.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-logging/commons-logging/jars/commons-logging-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-cli/commons-cli/jars/commons-cli-1.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/log4j/log4j/bundles/log4j-1.2.17.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-httpclient/commons-httpclient/jars/commons-httpclient-3.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/it.unimi.dsi/fastutil/jars/fastutil-6.6.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.github.samtools/htsjdk/jars/htsjdk-1.139.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.bdgenomics.utils/utils-misc_2.10/jars/utils-misc_2.10-0.2.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-encoding/jars/parquet-encoding-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.seqdoop/hadoop-bam/jars/hadoop-bam-7.1.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-mapper-asl/jars/jackson-mapper-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.httpcomponents/httpcore/jars/httpcore-4.4.3.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.beust/jcommander/jars/jcommander-1.27.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.parquet/parquet-hadoop/jars/parquet-hadoop-1.8.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-core/jars/servo-core-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/args4j/args4j/bundles/args4j-2.0.31.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.avro/avro/bundles/avro-1.7.7.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/commons-codec/commons-codec/jars/commons-codec-1.9.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/com.netflix.servo/servo-internal/jars/servo-internal-0.10.0.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.objenesis/objenesis/jars/objenesis-2.1.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.tukaani/xz/jars/xz-1.5.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.apache.ant/ant-launcher/jars/ant-launcher-1.8.2.jar&quot;},{&quot;string value&quot;:&quot;/tmp/spark-notebook/repo/e1837b36-a239-4c70-a5cc-31ecdf54b0e8/cache/org.codehaus.jackson/jackson-core-asl/jars/jackson-core-asl-1.9.13.jar&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/&quot;},{&quot;string value&quot;:&quot;file:/root/vcf-comp-deploy/lib/common.common-0.6.3-scala-2.10.5-spark-1.6.1-hadoop-2.6.0-with-hive-with-parquet.jar&quot;}],&quot;genId&quot;:&quot;703969862&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonbaf9fd2f5dfaace8411585b1ab19a6cd&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonb06cdba9ff9728d82b1e76db11b44940&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 2
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : true,
      "id" : "0B911AB33DA244D085A143909EBB215A"
    },
    "cell_type" : "code",
    "source" : "reset(lastChanges = _.set(\"spark.app.name\", \"My VCF analysis\")\n                     .set(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\")\n                     .set(\"spark.kryo.registrator\", \"org.tmoerman.adam.fx.serialization.AdamFxKryoRegistrator\")\n                     .set(\"spark.kryoserializer.buffer\", \"32m\")\n                     .set(\"spark.kryoserializer.buffer.max value\", \"128\")\n                     .set(\"spark.kryo.referenceTracking\", \"true\"))",
    "outputs" : [ {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 3
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : true,
      "id" : "BF0914934B5049C68BFF281DD716651A"
    },
    "cell_type" : "code",
    "source" : "import scala.language.implicitConversions\n\nimport org.bdgenomics.adam.rdd.ADAMContext._\nimport org.tmoerman.vcf.comp.VcfComparisonContext._\nimport org.tmoerman.vcf.comp.core.Model._\nimport org.tmoerman.adam.fx.avro.AnnotatedGenotype\nimport org.tmoerman.adam.fx.snpeff.SnpEffContext._\nimport org.tmoerman.adam.fx.snpeff.SnpEffAnnotationsParser._\nimport org.tmoerman.vcf.comp.VcfComparisonContextFunctions\n\nimplicit def pimpSparkContext(sc: SparkContext): VcfComparisonContextFunctions = new VcfComparisonContextFunctions(sc)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "import scala.language.implicitConversions\nimport org.bdgenomics.adam.rdd.ADAMContext._\nimport org.tmoerman.vcf.comp.VcfComparisonContext._\nimport org.tmoerman.vcf.comp.core.Model._\nimport org.tmoerman.adam.fx.avro.AnnotatedGenotype\nimport org.tmoerman.adam.fx.snpeff.SnpEffContext._\nimport org.tmoerman.adam.fx.snpeff.SnpEffAnnotationsParser._\nimport org.tmoerman.vcf.comp.VcfComparisonContextFunctions\npimpSparkContext: (sc: org.apache.spark.SparkContext)org.tmoerman.vcf.comp.VcfComparisonContextFunctions\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 4
    } ]
  }, {
    "metadata" : {
      "id" : "7B1A894E152045E6BC1CF58DB3AA1C99"
    },
    "cell_type" : "markdown",
    "source" : "## Which _Contigs_ are represented in a VCF File?"
  }, {
    "metadata" : {
      "id" : "8F574640C7CE4904854F3832942FC2FD"
    },
    "cell_type" : "markdown",
    "source" : "We want to get an idea of the contigs represented in a VCF file. We start by loading a file:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "output_stream_collapsed" : false,
      "collapsed" : false,
      "id" : "1687ECC51A7A44A7ADE8E6DD2CCFDD83"
    },
    "cell_type" : "code",
    "source" : "val workDir = \"data/pairedSamples/ExomeRNA/\"\nval vcf     = workDir + \"HCC1143-DNA-08.ann.vcf\"\n\nval genotypes = sc.loadAnnotatedGenotypes(vcf, None)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "workDir: String = data/pairedSamples/ExomeRNA/\nvcf: String = data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\ngenotypes: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[249] at flatMap at SnpEffContext.scala:94\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 152
    } ]
  }, {
    "metadata" : {
      "id" : "A5953C981B7D4E2EBD8237B3836A33EB"
    },
    "cell_type" : "markdown",
    "source" : "The ADAM API and data model provide a way to extract the contig by name using `.getGenotype.getVariant.getContig.getContigName`. We can use Spark's `countByValue` on an RDD with these and the result is a frequency table:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "output_stream_collapsed" : true,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1099927983-1\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "23EB4A113F364B20A3C56F9EDCC43A4F"
    },
    "cell_type" : "code",
    "source" : "val contigCounts = genotypes.map(_.getGenotype.getVariant.getContig.getContigName).countByValue()",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "contigCounts: scala.collection.Map[String,Long] = Map(X -> 1799, 12 -> 4634, 8 -> 3843, GL000241.1 -> 30, 19 -> 6263, 4 -> 3592, GL000231.1 -> 24, 15 -> 4393, 11 -> 5727, 9 -> 3893, GL000211.1 -> 103, GL000193.1 -> 7, Y -> 42, 22 -> 2978, GL000228.1 -> 24, GL000219.1 -> 82, 13 -> 1845, GL000220.1 -> 56, GL000192.1 -> 11, 16 -> 4092, GL000199.1 -> 2, 5 -> 4290, 10 -> 4899, GL000224.1 -> 5, 21 -> 1632, GL000237.1 -> 34, 6 -> 6071, 1 -> 10306, GL000230.1 -> 7, 17 -> 4923, GL000212.1 -> 93, GL000218.1 -> 9, 14 -> 3789, GL000194.1 -> 14, GL000225.1 -> 28, GL000205.1 -> 71, MT -> 24, 20 -> 2894, 2 -> 7136, GL000213.1 -> 1, 18 -> 2028, GL000215.1 -> 1, 7 -> 4497, GL000204.1 -> 1, GL000209.1 -> 12, 3 -> 5554, GL000195.1 -> 74, GL000229.1 -> 58, GL000216.1 -> 39, GL000221.1 -> 7)\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 154
    } ]
  }, {
    "metadata" : {
      "id" : "3BFC1901D7BC49209438FEB91C2A3692"
    },
    "cell_type" : "markdown",
    "source" : "In order to get a properly formatted table or even a graph, we can use Spark Notebook functionality. In this case, we sort the data from high number of variants per contig to low."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1213330716-1\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "EF93D4865AC34A419C568DD2FB3EC52D"
    },
    "cell_type" : "code",
    "source" : "contigCounts.toList.sortBy(-_._2)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res241: List[(String, Long)] = List((1,10306), (2,7136), (19,6263), (6,6071), (11,5727), (3,5554), (17,4923), (10,4899), (12,4634), (7,4497), (15,4393), (5,4290), (16,4092), (9,3893), (8,3843), (14,3789), (4,3592), (22,2978), (20,2894), (18,2028), (13,1845), (X,1799), (21,1632), (GL000211.1,103), (GL000212.1,93), (GL000219.1,82), (GL000195.1,74), (GL000205.1,71), (GL000229.1,58), (GL000220.1,56), (Y,42), (GL000216.1,39), (GL000237.1,34), (GL000241.1,30), (GL000225.1,28), (GL000231.1,24), (GL000228.1,24), (MT,24), (GL000194.1,14), (GL000209.1,12), (GL000192.1,11), (GL000218.1,9), (GL000193.1,7), (GL000230.1,7), (GL000221.1,7), (GL000224.1,5), (GL000199.1,2), (GL000213.1,1), (GL000215.1,1), (GL000204.1,1))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon507d78646c58f7cac6a9246184df2e77&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;1&quot;,&quot;_2&quot;:10306},{&quot;_1&quot;:&quot;2&quot;,&quot;_2&quot;:7136},{&quot;_1&quot;:&quot;19&quot;,&quot;_2&quot;:6263},{&quot;_1&quot;:&quot;6&quot;,&quot;_2&quot;:6071},{&quot;_1&quot;:&quot;11&quot;,&quot;_2&quot;:5727},{&quot;_1&quot;:&quot;3&quot;,&quot;_2&quot;:5554},{&quot;_1&quot;:&quot;17&quot;,&quot;_2&quot;:4923},{&quot;_1&quot;:&quot;10&quot;,&quot;_2&quot;:4899},{&quot;_1&quot;:&quot;12&quot;,&quot;_2&quot;:4634},{&quot;_1&quot;:&quot;7&quot;,&quot;_2&quot;:4497},{&quot;_1&quot;:&quot;15&quot;,&quot;_2&quot;:4393},{&quot;_1&quot;:&quot;5&quot;,&quot;_2&quot;:4290},{&quot;_1&quot;:&quot;16&quot;,&quot;_2&quot;:4092},{&quot;_1&quot;:&quot;9&quot;,&quot;_2&quot;:3893},{&quot;_1&quot;:&quot;8&quot;,&quot;_2&quot;:3843},{&quot;_1&quot;:&quot;14&quot;,&quot;_2&quot;:3789},{&quot;_1&quot;:&quot;4&quot;,&quot;_2&quot;:3592},{&quot;_1&quot;:&quot;22&quot;,&quot;_2&quot;:2978},{&quot;_1&quot;:&quot;20&quot;,&quot;_2&quot;:2894},{&quot;_1&quot;:&quot;18&quot;,&quot;_2&quot;:2028},{&quot;_1&quot;:&quot;13&quot;,&quot;_2&quot;:1845},{&quot;_1&quot;:&quot;X&quot;,&quot;_2&quot;:1799},{&quot;_1&quot;:&quot;21&quot;,&quot;_2&quot;:1632},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103},{&quot;_1&quot;:&quot;GL000212.1&quot;,&quot;_2&quot;:93},{&quot;_1&quot;:&quot;GL000219.1&quot;,&quot;_2&quot;:82},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000205.1&quot;,&quot;_2&quot;:71},{&quot;_1&quot;:&quot;GL000229.1&quot;,&quot;_2&quot;:58},{&quot;_1&quot;:&quot;GL000220.1&quot;,&quot;_2&quot;:56},{&quot;_1&quot;:&quot;Y&quot;,&quot;_2&quot;:42},{&quot;_1&quot;:&quot;GL000216.1&quot;,&quot;_2&quot;:39},{&quot;_1&quot;:&quot;GL000237.1&quot;,&quot;_2&quot;:34},{&quot;_1&quot;:&quot;GL000241.1&quot;,&quot;_2&quot;:30},{&quot;_1&quot;:&quot;GL000225.1&quot;,&quot;_2&quot;:28},{&quot;_1&quot;:&quot;GL000231.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000228.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;MT&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000194.1&quot;,&quot;_2&quot;:14},{&quot;_1&quot;:&quot;GL000209.1&quot;,&quot;_2&quot;:12},{&quot;_1&quot;:&quot;GL000192.1&quot;,&quot;_2&quot;:11},{&quot;_1&quot;:&quot;GL000218.1&quot;,&quot;_2&quot;:9},{&quot;_1&quot;:&quot;GL000193.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000230.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000221.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000199.1&quot;,&quot;_2&quot;:2},{&quot;_1&quot;:&quot;GL000213.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000215.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000204.1&quot;,&quot;_2&quot;:1}],&quot;genId&quot;:&quot;1213330716&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1213330716\"><li>\n                <a href=\"#tab1213330716-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1213330716-1\"><i class=\"fa fa-bar-chart\"/></a>\n              </li><li>\n                <a href=\"#tab1213330716-2\"><i class=\"fa fa-pie-chart\"/></a>\n              </li><li>\n                <a href=\"#tab1213330716-3\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1213330716\"><div class=\"tab-pane\" id=\"tab1213330716-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon0ef97d5662c6e21dde587be53371c802&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;1&quot;,&quot;_2&quot;:10306},{&quot;_1&quot;:&quot;2&quot;,&quot;_2&quot;:7136},{&quot;_1&quot;:&quot;19&quot;,&quot;_2&quot;:6263},{&quot;_1&quot;:&quot;6&quot;,&quot;_2&quot;:6071},{&quot;_1&quot;:&quot;11&quot;,&quot;_2&quot;:5727},{&quot;_1&quot;:&quot;3&quot;,&quot;_2&quot;:5554},{&quot;_1&quot;:&quot;17&quot;,&quot;_2&quot;:4923},{&quot;_1&quot;:&quot;10&quot;,&quot;_2&quot;:4899},{&quot;_1&quot;:&quot;12&quot;,&quot;_2&quot;:4634},{&quot;_1&quot;:&quot;7&quot;,&quot;_2&quot;:4497},{&quot;_1&quot;:&quot;15&quot;,&quot;_2&quot;:4393},{&quot;_1&quot;:&quot;5&quot;,&quot;_2&quot;:4290},{&quot;_1&quot;:&quot;16&quot;,&quot;_2&quot;:4092},{&quot;_1&quot;:&quot;9&quot;,&quot;_2&quot;:3893},{&quot;_1&quot;:&quot;8&quot;,&quot;_2&quot;:3843},{&quot;_1&quot;:&quot;14&quot;,&quot;_2&quot;:3789},{&quot;_1&quot;:&quot;4&quot;,&quot;_2&quot;:3592},{&quot;_1&quot;:&quot;22&quot;,&quot;_2&quot;:2978},{&quot;_1&quot;:&quot;20&quot;,&quot;_2&quot;:2894},{&quot;_1&quot;:&quot;18&quot;,&quot;_2&quot;:2028},{&quot;_1&quot;:&quot;13&quot;,&quot;_2&quot;:1845},{&quot;_1&quot;:&quot;X&quot;,&quot;_2&quot;:1799},{&quot;_1&quot;:&quot;21&quot;,&quot;_2&quot;:1632},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103},{&quot;_1&quot;:&quot;GL000212.1&quot;,&quot;_2&quot;:93},{&quot;_1&quot;:&quot;GL000219.1&quot;,&quot;_2&quot;:82},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000205.1&quot;,&quot;_2&quot;:71},{&quot;_1&quot;:&quot;GL000229.1&quot;,&quot;_2&quot;:58},{&quot;_1&quot;:&quot;GL000220.1&quot;,&quot;_2&quot;:56},{&quot;_1&quot;:&quot;Y&quot;,&quot;_2&quot;:42},{&quot;_1&quot;:&quot;GL000216.1&quot;,&quot;_2&quot;:39},{&quot;_1&quot;:&quot;GL000237.1&quot;,&quot;_2&quot;:34},{&quot;_1&quot;:&quot;GL000241.1&quot;,&quot;_2&quot;:30},{&quot;_1&quot;:&quot;GL000225.1&quot;,&quot;_2&quot;:28},{&quot;_1&quot;:&quot;GL000231.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000228.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;MT&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000194.1&quot;,&quot;_2&quot;:14},{&quot;_1&quot;:&quot;GL000209.1&quot;,&quot;_2&quot;:12},{&quot;_1&quot;:&quot;GL000192.1&quot;,&quot;_2&quot;:11},{&quot;_1&quot;:&quot;GL000218.1&quot;,&quot;_2&quot;:9},{&quot;_1&quot;:&quot;GL000193.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000230.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000221.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000199.1&quot;,&quot;_2&quot;:2},{&quot;_1&quot;:&quot;GL000213.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000215.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000204.1&quot;,&quot;_2&quot;:1}],&quot;genId&quot;:&quot;550794497&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon46d2fe8a4abfd1dc87db716b9b1cb83b&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonfd5b5f787c655b43f3243e26a7856ce7&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1213330716-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anone32199f022bab4c640741c2aa344f2f9&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;1&quot;,&quot;_2&quot;:10306},{&quot;_1&quot;:&quot;2&quot;,&quot;_2&quot;:7136},{&quot;_1&quot;:&quot;19&quot;,&quot;_2&quot;:6263},{&quot;_1&quot;:&quot;6&quot;,&quot;_2&quot;:6071},{&quot;_1&quot;:&quot;11&quot;,&quot;_2&quot;:5727},{&quot;_1&quot;:&quot;3&quot;,&quot;_2&quot;:5554},{&quot;_1&quot;:&quot;17&quot;,&quot;_2&quot;:4923},{&quot;_1&quot;:&quot;10&quot;,&quot;_2&quot;:4899},{&quot;_1&quot;:&quot;12&quot;,&quot;_2&quot;:4634},{&quot;_1&quot;:&quot;7&quot;,&quot;_2&quot;:4497},{&quot;_1&quot;:&quot;15&quot;,&quot;_2&quot;:4393},{&quot;_1&quot;:&quot;5&quot;,&quot;_2&quot;:4290},{&quot;_1&quot;:&quot;16&quot;,&quot;_2&quot;:4092},{&quot;_1&quot;:&quot;9&quot;,&quot;_2&quot;:3893},{&quot;_1&quot;:&quot;8&quot;,&quot;_2&quot;:3843},{&quot;_1&quot;:&quot;14&quot;,&quot;_2&quot;:3789},{&quot;_1&quot;:&quot;4&quot;,&quot;_2&quot;:3592},{&quot;_1&quot;:&quot;22&quot;,&quot;_2&quot;:2978},{&quot;_1&quot;:&quot;20&quot;,&quot;_2&quot;:2894},{&quot;_1&quot;:&quot;18&quot;,&quot;_2&quot;:2028},{&quot;_1&quot;:&quot;13&quot;,&quot;_2&quot;:1845},{&quot;_1&quot;:&quot;X&quot;,&quot;_2&quot;:1799},{&quot;_1&quot;:&quot;21&quot;,&quot;_2&quot;:1632},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103},{&quot;_1&quot;:&quot;GL000212.1&quot;,&quot;_2&quot;:93},{&quot;_1&quot;:&quot;GL000219.1&quot;,&quot;_2&quot;:82},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000205.1&quot;,&quot;_2&quot;:71},{&quot;_1&quot;:&quot;GL000229.1&quot;,&quot;_2&quot;:58},{&quot;_1&quot;:&quot;GL000220.1&quot;,&quot;_2&quot;:56},{&quot;_1&quot;:&quot;Y&quot;,&quot;_2&quot;:42},{&quot;_1&quot;:&quot;GL000216.1&quot;,&quot;_2&quot;:39},{&quot;_1&quot;:&quot;GL000237.1&quot;,&quot;_2&quot;:34},{&quot;_1&quot;:&quot;GL000241.1&quot;,&quot;_2&quot;:30},{&quot;_1&quot;:&quot;GL000225.1&quot;,&quot;_2&quot;:28},{&quot;_1&quot;:&quot;GL000231.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000228.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;MT&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000194.1&quot;,&quot;_2&quot;:14},{&quot;_1&quot;:&quot;GL000209.1&quot;,&quot;_2&quot;:12},{&quot;_1&quot;:&quot;GL000192.1&quot;,&quot;_2&quot;:11},{&quot;_1&quot;:&quot;GL000218.1&quot;,&quot;_2&quot;:9},{&quot;_1&quot;:&quot;GL000193.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000230.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000221.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000199.1&quot;,&quot;_2&quot;:2},{&quot;_1&quot;:&quot;GL000213.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000215.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000204.1&quot;,&quot;_2&quot;:1}],&quot;genId&quot;:&quot;351010712&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/barChart'], \n      function(playground, _magicbarChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicbarChart,\n    \"o\": {\"x\":\"_1\",\"y\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon65f3b77437c281ed70e9c00b75f39416&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon84b34d8ca95ba2839a606078259f62de&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1213330716-2\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon8114ea7a792c708bf0aeea8b5f467a19&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;1&quot;,&quot;_2&quot;:10306},{&quot;_1&quot;:&quot;2&quot;,&quot;_2&quot;:7136},{&quot;_1&quot;:&quot;19&quot;,&quot;_2&quot;:6263},{&quot;_1&quot;:&quot;6&quot;,&quot;_2&quot;:6071},{&quot;_1&quot;:&quot;11&quot;,&quot;_2&quot;:5727},{&quot;_1&quot;:&quot;3&quot;,&quot;_2&quot;:5554},{&quot;_1&quot;:&quot;17&quot;,&quot;_2&quot;:4923},{&quot;_1&quot;:&quot;10&quot;,&quot;_2&quot;:4899},{&quot;_1&quot;:&quot;12&quot;,&quot;_2&quot;:4634},{&quot;_1&quot;:&quot;7&quot;,&quot;_2&quot;:4497},{&quot;_1&quot;:&quot;15&quot;,&quot;_2&quot;:4393},{&quot;_1&quot;:&quot;5&quot;,&quot;_2&quot;:4290},{&quot;_1&quot;:&quot;16&quot;,&quot;_2&quot;:4092},{&quot;_1&quot;:&quot;9&quot;,&quot;_2&quot;:3893},{&quot;_1&quot;:&quot;8&quot;,&quot;_2&quot;:3843},{&quot;_1&quot;:&quot;14&quot;,&quot;_2&quot;:3789},{&quot;_1&quot;:&quot;4&quot;,&quot;_2&quot;:3592},{&quot;_1&quot;:&quot;22&quot;,&quot;_2&quot;:2978},{&quot;_1&quot;:&quot;20&quot;,&quot;_2&quot;:2894},{&quot;_1&quot;:&quot;18&quot;,&quot;_2&quot;:2028},{&quot;_1&quot;:&quot;13&quot;,&quot;_2&quot;:1845},{&quot;_1&quot;:&quot;X&quot;,&quot;_2&quot;:1799},{&quot;_1&quot;:&quot;21&quot;,&quot;_2&quot;:1632},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103},{&quot;_1&quot;:&quot;GL000212.1&quot;,&quot;_2&quot;:93},{&quot;_1&quot;:&quot;GL000219.1&quot;,&quot;_2&quot;:82},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000205.1&quot;,&quot;_2&quot;:71},{&quot;_1&quot;:&quot;GL000229.1&quot;,&quot;_2&quot;:58},{&quot;_1&quot;:&quot;GL000220.1&quot;,&quot;_2&quot;:56},{&quot;_1&quot;:&quot;Y&quot;,&quot;_2&quot;:42},{&quot;_1&quot;:&quot;GL000216.1&quot;,&quot;_2&quot;:39},{&quot;_1&quot;:&quot;GL000237.1&quot;,&quot;_2&quot;:34},{&quot;_1&quot;:&quot;GL000241.1&quot;,&quot;_2&quot;:30},{&quot;_1&quot;:&quot;GL000225.1&quot;,&quot;_2&quot;:28},{&quot;_1&quot;:&quot;GL000231.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000228.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;MT&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000194.1&quot;,&quot;_2&quot;:14},{&quot;_1&quot;:&quot;GL000209.1&quot;,&quot;_2&quot;:12},{&quot;_1&quot;:&quot;GL000192.1&quot;,&quot;_2&quot;:11},{&quot;_1&quot;:&quot;GL000218.1&quot;,&quot;_2&quot;:9},{&quot;_1&quot;:&quot;GL000193.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000230.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000221.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000199.1&quot;,&quot;_2&quot;:2},{&quot;_1&quot;:&quot;GL000213.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000215.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000204.1&quot;,&quot;_2&quot;:1}],&quot;genId&quot;:&quot;225019118&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pieChart'], \n      function(playground, _magicpieChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpieChart,\n    \"o\": {\"series\":\"_1\",\"p\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon060735bab4f1c0c8e88920e71a060a15&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon4774f421f0b159eec8df042199d32611&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1213330716-3\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon55d176cf4784a70d3b2de7abbf6729df&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;1&quot;,&quot;_2&quot;:10306},{&quot;_1&quot;:&quot;2&quot;,&quot;_2&quot;:7136},{&quot;_1&quot;:&quot;19&quot;,&quot;_2&quot;:6263},{&quot;_1&quot;:&quot;6&quot;,&quot;_2&quot;:6071},{&quot;_1&quot;:&quot;11&quot;,&quot;_2&quot;:5727},{&quot;_1&quot;:&quot;3&quot;,&quot;_2&quot;:5554},{&quot;_1&quot;:&quot;17&quot;,&quot;_2&quot;:4923},{&quot;_1&quot;:&quot;10&quot;,&quot;_2&quot;:4899},{&quot;_1&quot;:&quot;12&quot;,&quot;_2&quot;:4634},{&quot;_1&quot;:&quot;7&quot;,&quot;_2&quot;:4497},{&quot;_1&quot;:&quot;15&quot;,&quot;_2&quot;:4393},{&quot;_1&quot;:&quot;5&quot;,&quot;_2&quot;:4290},{&quot;_1&quot;:&quot;16&quot;,&quot;_2&quot;:4092},{&quot;_1&quot;:&quot;9&quot;,&quot;_2&quot;:3893},{&quot;_1&quot;:&quot;8&quot;,&quot;_2&quot;:3843},{&quot;_1&quot;:&quot;14&quot;,&quot;_2&quot;:3789},{&quot;_1&quot;:&quot;4&quot;,&quot;_2&quot;:3592},{&quot;_1&quot;:&quot;22&quot;,&quot;_2&quot;:2978},{&quot;_1&quot;:&quot;20&quot;,&quot;_2&quot;:2894},{&quot;_1&quot;:&quot;18&quot;,&quot;_2&quot;:2028},{&quot;_1&quot;:&quot;13&quot;,&quot;_2&quot;:1845},{&quot;_1&quot;:&quot;X&quot;,&quot;_2&quot;:1799},{&quot;_1&quot;:&quot;21&quot;,&quot;_2&quot;:1632},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103},{&quot;_1&quot;:&quot;GL000212.1&quot;,&quot;_2&quot;:93},{&quot;_1&quot;:&quot;GL000219.1&quot;,&quot;_2&quot;:82},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000205.1&quot;,&quot;_2&quot;:71},{&quot;_1&quot;:&quot;GL000229.1&quot;,&quot;_2&quot;:58},{&quot;_1&quot;:&quot;GL000220.1&quot;,&quot;_2&quot;:56},{&quot;_1&quot;:&quot;Y&quot;,&quot;_2&quot;:42},{&quot;_1&quot;:&quot;GL000216.1&quot;,&quot;_2&quot;:39},{&quot;_1&quot;:&quot;GL000237.1&quot;,&quot;_2&quot;:34},{&quot;_1&quot;:&quot;GL000241.1&quot;,&quot;_2&quot;:30},{&quot;_1&quot;:&quot;GL000225.1&quot;,&quot;_2&quot;:28},{&quot;_1&quot;:&quot;GL000231.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000228.1&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;MT&quot;,&quot;_2&quot;:24},{&quot;_1&quot;:&quot;GL000194.1&quot;,&quot;_2&quot;:14},{&quot;_1&quot;:&quot;GL000209.1&quot;,&quot;_2&quot;:12},{&quot;_1&quot;:&quot;GL000192.1&quot;,&quot;_2&quot;:11},{&quot;_1&quot;:&quot;GL000218.1&quot;,&quot;_2&quot;:9},{&quot;_1&quot;:&quot;GL000193.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000230.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000221.1&quot;,&quot;_2&quot;:7},{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000199.1&quot;,&quot;_2&quot;:2},{&quot;_1&quot;:&quot;GL000213.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000215.1&quot;,&quot;_2&quot;:1},{&quot;_1&quot;:&quot;GL000204.1&quot;,&quot;_2&quot;:1}],&quot;genId&quot;:&quot;1377597876&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon6f25cba1c545aed7ac1b90496a7864f7&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonf0859c630f29f92cf3faf20f1ef2854f&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 157
    } ]
  }, {
    "metadata" : {
      "id" : "D3857231F124431E9DB9305EC66AFA56"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "2035642C064043E7A54FBFB6AB690CA2"
    },
    "cell_type" : "markdown",
    "source" : "## Selection of Variants by (List of) Contig"
  }, {
    "metadata" : {
      "id" : "5DF61C9DF0E74B638287CF9B49D9362A"
    },
    "cell_type" : "markdown",
    "source" : "Once we know which contigs are represented in set of variants, we might want to make a selection. The following function takes care of this. But please note that the function is just a wrapper around Spark's `filter` and ADAM's API:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "3CBF194338F4425F8D7E25BE4036FAAD"
    },
    "cell_type" : "code",
    "source" : "def filterByContigList(rdd: RDD[AnnotatedGenotype], contigList: List[String]) = {\n  rdd.filter(av => contigList.contains(av.getGenotype.getVariant.getContig.getContigName))\n}\n\n// The list to filter on:\nval listOfContigs = List(\"GL000211.1\", \"GL000224.1\", \"GL000195.1\")\n\n// The selection\nval selection = filterByContigList(genotypes, listOfContigs)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "filterByContigList: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], contigList: List[String])org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype]\nlistOfContigs: List[String] = List(GL000211.1, GL000224.1, GL000195.1)\nselection: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[258] at filter at <console>:137\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 158
    } ]
  }, {
    "metadata" : {
      "id" : "494CB4C047F54AD49A45B1BB53641B75"
    },
    "cell_type" : "markdown",
    "source" : "We can get a visual representation again, similarly to what we did above:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1269668330-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "CE95E5A42D6F4E3C8485319D0274D0DA"
    },
    "cell_type" : "code",
    "source" : "selection.map(_.getGenotype.getVariant.getContig.getContigName).countByValue().toList",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res232: List[(String, Long)] = List((GL000224.1,5), (GL000195.1,74), (GL000211.1,103))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon5e4e1323da93337b55613eb671df3e6b&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103}],&quot;genId&quot;:&quot;1269668330&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1269668330\"><li>\n                <a href=\"#tab1269668330-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1269668330-1\"><i class=\"fa fa-bar-chart\"/></a>\n              </li><li>\n                <a href=\"#tab1269668330-2\"><i class=\"fa fa-pie-chart\"/></a>\n              </li><li>\n                <a href=\"#tab1269668330-3\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1269668330\"><div class=\"tab-pane\" id=\"tab1269668330-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon21344a5569848303f6f789433450f667&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103}],&quot;genId&quot;:&quot;908025081&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon56e1cd19a39ae3bfbc0db7f55483e384&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon04c5c6d098f7a60561ec256f50182587&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1269668330-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon8d508445374b7756810d72a7a9fa889e&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103}],&quot;genId&quot;:&quot;1646026605&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/barChart'], \n      function(playground, _magicbarChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicbarChart,\n    \"o\": {\"x\":\"_1\",\"y\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon68e5878ef76550b8b69bef4a19392b44&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon982f0ec1ffb2905ec4248f0d162a838c&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1269668330-2\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonda98ecef83f8160bffd5d076a9831021&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103}],&quot;genId&quot;:&quot;902471491&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pieChart'], \n      function(playground, _magicpieChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpieChart,\n    \"o\": {\"series\":\"_1\",\"p\":\"_2\",\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon7ea44f4f6b4fd2ee46bafce283186b97&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonb6bcc51c734d23f95789ea58b806e3a4&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1269668330-3\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon90a10fd69bfca27fb07896b9ba93f32a&quot;,&quot;dataInit&quot;:[{&quot;_1&quot;:&quot;GL000224.1&quot;,&quot;_2&quot;:5},{&quot;_1&quot;:&quot;GL000195.1&quot;,&quot;_2&quot;:74},{&quot;_1&quot;:&quot;GL000211.1&quot;,&quot;_2&quot;:103}],&quot;genId&quot;:&quot;1945298141&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon183fc4479b83d9a6b4d93cd9e938a7d4&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon481051597e86b50a80d5b72b23241437&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 151
    } ]
  }, {
    "metadata" : {
      "id" : "E5C7030B9C6E4F999E0B1DFF551060B5"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "1F8B5FE516EF492B84C7D5CAD23900DE"
    },
    "cell_type" : "markdown",
    "source" : "## Which Genes are represented in a VCF File?"
  }, {
    "metadata" : {
      "id" : "A15377A6A3B14567B601068E79986C75"
    },
    "cell_type" : "markdown",
    "source" : "Another useful function is to get a list of genes represented in a VCF file and later to filter on it just like for contigs. "
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "1687ECC51A7A44A7ADE8E6DD2CCFDD83"
    },
    "cell_type" : "code",
    "source" : "val workDir = \"data/pairedSamples/ExomeRNA/\"\nval vcf     = workDir + \"HCC1143-DNA-08.ann.vcf\"\n\nval genotypes = sc.loadAnnotatedGenotypes(vcf, None)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "workDir: String = data/pairedSamples/ExomeRNA/\nvcf: String = data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\ngenotypes: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[260] at flatMap at SnpEffContext.scala:94\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 159
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "02BCF17CE49E482684680C7127A5C8E9"
    },
    "cell_type" : "code",
    "source" : "val geneIDsCount = genotypes.flatMap(_.getAnnotations.getFunctionalAnnotations.map(_.getGeneID)).countByValue()\nval geneIDs = geneIDsCount.keys\n\nval geneNamesCount = genotypes.flatMap(_.getAnnotations.getFunctionalAnnotations.map(_.getGeneName)).countByValue()\nval geneNames = geneNamesCount.keys",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "geneIDsCount: scala.collection.Map[String,Long] = Map(ENSG00000172410 -> 3, ENSG00000256465-ENSG00000244436 -> 1, ENSG00000077312 -> 56, ENSG00000176318 -> 2, ENSG00000240671-ENSG00000241755 -> 2, ENSG00000151498 -> 35, ENSG00000232672 -> 1, ENSG00000232004 -> 3, ENSG00000224232 -> 2, ENSG00000234568 -> 1, ENSG00000234898 -> 5, ENSG00000239961 -> 11, ENSG00000167895 -> 56, ENSG00000214089-ENSG00000270767 -> 1, ENSG00000204793 -> 1, ENSG00000029534 -> 235, ENSG00000255750 -> 6, ENSG00000204020 -> 4, ENSG00000253953 -> 49, ENSG00000179443 -> 3, ENSG00000234936 -> 1, ENSG00000134278 -> 94, ENSG00000228567 -> 5, ENSG00000249255 -> 2, ENSG00000219387 -> 1, ENSG00000254732 -> 2, ENSG00000201622 -> 3, ENSG00000254459 -> 7, ENSG00000142168 -> 19, ENSG00000232383 -> 2, ENSG00000213561 -> 1, ENSG..."
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 68
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab484912524-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "D079ADC81CD94C368D5557C1AC607CA7"
    },
    "cell_type" : "code",
    "source" : "print(geneIDsCount.take(5).mkString(\"\\n\"))",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "ENSG00000172410 -> 3\nENSG00000256465-ENSG00000244436 -> 1\nENSG00000077312 -> 56\nENSG00000176318 -> 2\nENSG00000240671-ENSG00000241755 -> 2"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 69
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab484912524-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "D079ADC81CD94C368D5557C1AC607CA7"
    },
    "cell_type" : "code",
    "source" : "print(geneNamesCount.take(5).mkString(\"\\n\"))",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "LDLR -> 293\nMT-RNR1 -> 10\nCCL3 -> 6\nAP000350.4 -> 1\nTCEA1P1 -> 1"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 70
    } ]
  }, {
    "metadata" : {
      "id" : "69F084FE95DC4C438EE94191C98790DA"
    },
    "cell_type" : "markdown",
    "source" : "__Remark__: The counts presented here represents the number of simple _occurrences_ of a gene. Multiple annotations can be present per position all relating to the same gene. "
  }, {
    "metadata" : {
      "id" : "B825E9A0A68744AC8FEE4A549FB12CB4"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "4748876F0F5142678DDF3168DD81DF96"
    },
    "cell_type" : "markdown",
    "source" : "## Selection of Variants by Gene"
  }, {
    "metadata" : {
      "id" : "04C9635B3D9546AD868A02999DF1146D"
    },
    "cell_type" : "markdown",
    "source" : "Below, we provide 2 functions for selecting variants based on genes, depending on the naming scheme used."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "248F93AC6FDD412680F9CCB3A0A426C5"
    },
    "cell_type" : "code",
    "source" : "def filterByGeneID(rdd: RDD[AnnotatedGenotype], gene: String) = {\n  rdd.filter(x => x.getAnnotations.getFunctionalAnnotations.map(_.getGeneID).toSet.contains(gene))\n}\n\ndef filterByGeneName(rdd: RDD[AnnotatedGenotype], gene: String) = {\n  rdd.filter(x => x.getAnnotations.getFunctionalAnnotations.map(_.getGeneName).toSet.contains(gene))\n}",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "filterByGeneID: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], gene: String)org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype]\nfilterByGeneName: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], gene: String)org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype]\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 19
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab547611665-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "8C7184E0C81E4A8D84EE3DB2CE59A57A"
    },
    "cell_type" : "code",
    "source" : "//val selection = genotypes.filter(x => x.getAnnotations.getFunctionalAnnotations.map(_.getGeneID).toSet.contains(\"ENSG00000186092\"))\nval selectionByID = filterByGeneID(genotypes, \"ENSG00000006075\")",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "selectionByID: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[94] at filter at <console>:78\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 73
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "8700119E217F40C48FDFD7DD503E18CE"
    },
    "cell_type" : "code",
    "source" : "val selectionByName = filterByGeneName(genotypes, \"CCL3\")",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "selectionByName: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[92] at filter at <console>:82\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 71
    } ]
  }, {
    "metadata" : {
      "id" : "991092202A1C4C2E8BD12C6E4041BDEC"
    },
    "cell_type" : "markdown",
    "source" : "A quick consistency check:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "2C177E89DE054CC597E15126959AB1D8"
    },
    "cell_type" : "code",
    "source" : "selectionByID.count == selectionByName.count",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res245: Boolean = true\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "true"
      },
      "output_type" : "execute_result",
      "execution_count" : 160
    } ]
  }, {
    "metadata" : {
      "id" : "3FA6D1DFEABF4B608512DAD00595EB6D"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "CB97F262B96E42D186D5102974309C31"
    },
    "cell_type" : "markdown",
    "source" : "## Display the contents of a selection"
  }, {
    "metadata" : {
      "id" : "A0956C452C7C4FE4867B73F29911DFE2"
    },
    "cell_type" : "markdown",
    "source" : "Sometimes, we just want to get an idea of what is inside a VCF file. The following provides a template. Using the ADAM and ADAM-FX API, other fields can be extracted. Please not that multiple functional annotations can occur for one genotype. We convert to a `Set` in this example in order to easily remove duplicates. In other cases another approach might be needed.\n\n__REMARK__: Please be aware that the data is _collected_, so it occupies memory on the driver node. Make sure you make a proper selection before actually performing this step!"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1716577820-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "CA3ABA7023B049AD9A38527E45860D8B"
    },
    "cell_type" : "code",
    "source" : "selectionByName.map(av => (\n  av.getGenotype.getVariant.getContig.getContigName,\n  av.getGenotype.getVariant.getStart,\n  av.getGenotype.getVariant.getEnd,\n  av.getGenotype.getVariant.getReferenceAllele,\n  av.getGenotype.getVariant.getAlternateAllele,\n  av.getAnnotations.getFunctionalAnnotations.map(_.getGeneName).toSet,\n  av.getAnnotations.getFunctionalAnnotations.map(_.getGeneID).toSet)\n             ).collect",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res109: Array[(String, Long, Long, String, String, scala.collection.immutable.Set[String], scala.collection.immutable.Set[String])] = Array((17,34416452,34416453,G,A,Set(CCL3, AC069363.1),Set(ENSG00000006075, ENSG00000224298)), (17,34416664,34416665,A,G,Set(CCL3, AC069363.1),Set(ENSG00000006075, ENSG00000224298)))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon806d5052f0e2ff9a4d6988c098ab4f18&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:34416453,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416452,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;G&quot;,&quot;_5&quot;:&quot;A&quot;},{&quot;_3&quot;:34416665,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416664,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;1716577820&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1716577820\"><li>\n                <a href=\"#tab1716577820-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1716577820-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1716577820\"><div class=\"tab-pane\" id=\"tab1716577820-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anond1e6542e16b0226d70b5b164d38c2f36&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:34416453,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416452,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;G&quot;,&quot;_5&quot;:&quot;A&quot;},{&quot;_3&quot;:34416665,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416664,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;339452947&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\",\"_3\",\"_4\",\"_5\",\"_6\",\"_7\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonaca22ea88ebc90134472a34b236895c3&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anona59431142c1407bae5dc393a6d246bdf&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1716577820-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon9fd200c58d495bd951817f7595c33a64&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:34416453,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416452,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;G&quot;,&quot;_5&quot;:&quot;A&quot;},{&quot;_3&quot;:34416665,&quot;_7&quot;:[&quot;ENSG00000006075&quot;,&quot;ENSG00000224298&quot;],&quot;_2&quot;:34416664,&quot;_6&quot;:[&quot;CCL3&quot;,&quot;AC069363.1&quot;],&quot;_1&quot;:&quot;17&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;751732497&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon68c84c2c1903ec479987863c1daa5c23&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon83755be9395b5338fab9cafbc57875a3&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 75
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "76AB03BCBF2B4816885BB86C87E7D8D2"
    },
    "cell_type" : "code",
    "source" : "def printTable(ag:RDD[AnnotatedGenotype]) = {\n ag.map(av => (\n    av.getGenotype.getVariant.getContig.getContigName,\n    av.getGenotype.getVariant.getStart,\n    av.getGenotype.getVariant.getEnd,\n    av.getGenotype.getVariant.getReferenceAllele,\n    av.getGenotype.getVariant.getAlternateAllele,\n    av.getAnnotations.getFunctionalAnnotations.map(_.getGeneName).toSet,\n    av.getAnnotations.getFunctionalAnnotations.map(_.getGeneID).toSet)\n               ).collect \n}",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "printTable: (ag: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype])Array[(String, Long, Long, String, String, scala.collection.immutable.Set[String], scala.collection.immutable.Set[String])]\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 233
    } ]
  }, {
    "metadata" : {
      "id" : "DE85CB2614AD4624A782E600E6162610"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "620E23A6EDC646D3A67BB489C93CEECE"
    },
    "cell_type" : "markdown",
    "source" : "# Examining the API"
  }, {
    "metadata" : {
      "id" : "039AC43C3C5D420F8BDCE17A3D9BA392"
    },
    "cell_type" : "markdown",
    "source" : "Sometimes you know what you are looking for in a variant, but finding out how to use the API to get to that information might be tricky. Below, we define a convience function and provide some examples of how this can be done.\n\nWe start by selecting one genotype as a reference:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "D30FD733D57B4197B0AFBDAF5839C700"
    },
    "cell_type" : "code",
    "source" : "val av = selectionByName.first",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "av: org.tmoerman.adam.fx.avro.AnnotatedGenotype = {\"genotype\": {\"variant\": {\"variantErrorProbability\": 1737, \"contig\": {\"contigName\": \"17\", \"contigLength\": null, \"contigMD5\": null, \"referenceURL\": null, \"assembly\": null, \"species\": null, \"referenceIndex\": null}, \"start\": 34416452, \"end\": 34416453, \"referenceAllele\": \"G\", \"alternateAllele\": \"A\", \"svAllele\": null, \"isSomatic\": false}, \"variantCallingAnnotations\": {\"variantIsPassing\": null, \"variantFilters\": [], \"downsampled\": null, \"baseQRankSum\": null, \"fisherStrandBiasPValue\": 0.0, \"rmsMapQ\": 50.13, \"mapq0Reads\": null, \"mqRankSum\": null, \"readPositionRankSum\": null, \"genotypePriors\": [], \"genotypePosteriors\": [], \"vqslod\": null, \"culprit\": null, \"attributes\": {}}, \"sampleId\": \"HCC1143\", \"sampleDescription\": null, \"processingDescription\"..."
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 130
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1330981804-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "7827CB15EB304A4BBE5B25295BB560DC"
    },
    "cell_type" : "code",
    "source" : "def listFields[T](o:T) = {\n  import scala.reflect.runtime.universe._\n  o.getClass.getDeclaredFields.tail\n}",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "listFields: [T](o: T)Array[java.lang.reflect.Field]\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 186
    } ]
  }, {
    "metadata" : {
      "id" : "047F63F88D5A4EEF804474AEAC40F6E3"
    },
    "cell_type" : "markdown",
    "source" : "Please note that the class fields and accessor methods differ in that in order to access a field `aField`, one should use the method `getAField`."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab2146822034-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "98F4C1FD8EA0447487E281FB0A24B8D3"
    },
    "cell_type" : "code",
    "source" : "listFields(av.getAnnotations)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res288: Array[java.lang.reflect.Field] = Array(public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.functionalAnnotations, public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.lossOfFunction, public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.nonsenseMediatedDecay, public org.tmoerman.adam.fx.avro.DbSnpAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.dbSnpAnnotations, public org.tmoerman.adam.fx.avro.ClinvarAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.clinvarAnnotations)\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anond58f7122bdc5cc04f9bc8827938d0e55&quot;,&quot;dataInit&quot;:[{&quot;name&quot;:&quot;functionalAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.functionalAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/FunctionalAnnotation;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@9daef504&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:21},{&quot;name&quot;:&quot;lossOfFunction&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.lossOfFunction&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@bc2507e6&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:22},{&quot;name&quot;:&quot;nonsenseMediatedDecay&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.nonsenseMediatedDecay&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@e8010afd&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:23},{&quot;name&quot;:&quot;dbSnpAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.DbSnpAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.dbSnpAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@1ef3da17&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.DbSnpAnnotations&quot;,&quot;slot&quot;:24},{&quot;name&quot;:&quot;clinvarAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.ClinvarAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.clinvarAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@4235a11b&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.ClinvarAnnotations&quot;,&quot;slot&quot;:25}],&quot;genId&quot;:&quot;2146822034&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul2146822034\"><li>\n                <a href=\"#tab2146822034-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab2146822034-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab2146822034\"><div class=\"tab-pane\" id=\"tab2146822034-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon0ed4347af63ec34a5029eedb7fd94209&quot;,&quot;dataInit&quot;:[{&quot;name&quot;:&quot;functionalAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.functionalAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/FunctionalAnnotation;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@9daef504&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:21},{&quot;name&quot;:&quot;lossOfFunction&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.lossOfFunction&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@bc2507e6&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:22},{&quot;name&quot;:&quot;nonsenseMediatedDecay&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.nonsenseMediatedDecay&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@e8010afd&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:23},{&quot;name&quot;:&quot;dbSnpAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.DbSnpAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.dbSnpAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@1ef3da17&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.DbSnpAnnotations&quot;,&quot;slot&quot;:24},{&quot;name&quot;:&quot;clinvarAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.ClinvarAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.clinvarAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@4235a11b&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.ClinvarAnnotations&quot;,&quot;slot&quot;:25}],&quot;genId&quot;:&quot;499816309&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"override\",\"securityCheckCache\",\"clazz\",\"slot\",\"name\",\"type\",\"modifiers\",\"signature\",\"genericInfo\",\"annotations\",\"fieldAccessor\",\"overrideFieldAccessor\",\"root\",\"declaredAnnotations\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon88066acb160147e7784a0d209445ad02&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonbf890923fb353d7bf0a2085b35a4f537&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab2146822034-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonc2005a3b0a941e7ac29dcec9c4b2b2d3&quot;,&quot;dataInit&quot;:[{&quot;name&quot;:&quot;functionalAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.functionalAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/FunctionalAnnotation;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@9daef504&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:21},{&quot;name&quot;:&quot;lossOfFunction&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.lossOfFunction&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@bc2507e6&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:22},{&quot;name&quot;:&quot;nonsenseMediatedDecay&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public java.util.List org.tmoerman.adam.fx.avro.SnpEffAnnotations.nonsenseMediatedDecay&quot;,&quot;override&quot;:false,&quot;signature&quot;:&quot;Ljava/util/List&lt;Lorg/tmoerman/adam/fx/avro/EffectPrediction;&gt;;&quot;,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@e8010afd&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;interface java.util.List&quot;,&quot;slot&quot;:23},{&quot;name&quot;:&quot;dbSnpAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.DbSnpAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.dbSnpAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@1ef3da17&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.DbSnpAnnotations&quot;,&quot;slot&quot;:24},{&quot;name&quot;:&quot;clinvarAnnotations&quot;,&quot;clazz&quot;:&quot;class org.tmoerman.adam.fx.avro.SnpEffAnnotations&quot;,&quot;root&quot;:&quot;public org.tmoerman.adam.fx.avro.ClinvarAnnotations org.tmoerman.adam.fx.avro.SnpEffAnnotations.clinvarAnnotations&quot;,&quot;override&quot;:false,&quot;signature&quot;:null,&quot;genericInfo&quot;:null,&quot;overrideFieldAccessor&quot;:null,&quot;annotations&quot;:&quot;[B@4235a11b&quot;,&quot;fieldAccessor&quot;:null,&quot;declaredAnnotations&quot;:null,&quot;modifiers&quot;:1,&quot;securityCheckCache&quot;:null,&quot;type&quot;:&quot;class org.tmoerman.adam.fx.avro.ClinvarAnnotations&quot;,&quot;slot&quot;:25}],&quot;genId&quot;:&quot;1974431494&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anona9e9f81a396cd7f6e8452b4b21088029&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonf2f7d582018403ec6d39f8afbd7f9b1d&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 188
    } ]
  }, {
    "metadata" : {
      "id" : "D786B158C1FB45BC889179AE28666169"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "1B2E9C19B9554EA582E737CFC2401AB1"
    },
    "cell_type" : "markdown",
    "source" : "## Export a VCF File"
  }, {
    "metadata" : {
      "id" : "C16F1E614F62467E8CCB8B70644DB3C4"
    },
    "cell_type" : "markdown",
    "source" : "The procedure for exporting a a set of variants to VCF format or a selection of variants is the same. As long as we have an `RDD` of `Genotype`, Adam and a quick hack do the trick:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "DEBE22F876524CB8BB8261679729D28A"
    },
    "cell_type" : "code",
    "source" : "import scala.sys.process._\nimport scala.language.postfixOps\n\ndef shellTestToBool(shellCommand:String):Boolean = {\n    Some(shellCommand !)\n                      .map{ _ match {\n                                case 0 => true\n                                case _ => false }\n                          }.get\n}\n\ndef saveAsVcf(rdd: RDD[AnnotatedGenotype], fileName: String) = {\n\n  rdd.map(_.getGenotype).toVariantContext().saveAsVcf(fileName + \"-dir.vcf\", sortOnSave = true, coalesceTo = Some(1))\n\n  val result = shellTestToBool(s\"cp ${fileName + \"-dir.vcf\"}/part-r-00000 ${fileName}\")\n  \n  if (result == true) {\n    println(\"Export ok, please find you file in \" + fileName)\n  }\n}",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "import scala.sys.process._\nimport scala.language.postfixOps\nshellTestToBool: (shellCommand: String)Boolean\nsaveAsVcf: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], fileName: String)Unit\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 119
    } ]
  }, {
    "metadata" : {
      "id" : "0295E7CF82824255AD5FA8499B37A05D"
    },
    "cell_type" : "markdown",
    "source" : "Select a VCF file, load the data and apply a selection."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "B34FA3580B474A1A9941CF6255D3142A"
    },
    "cell_type" : "code",
    "source" : "val vcf = \"data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\"\nval genotypes = sc.loadAnnotatedGenotypes(vcf, None)\nval selection = filterByGeneName(genotypes, \"LDLR\")",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "vcf: String = data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\ngenotypes: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[237] at flatMap at SnpEffContext.scala:94\nselection: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[238] at filter at <console>:82\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 124
    } ]
  }, {
    "metadata" : {
      "id" : "D9AB2350D1904D2EAADE4792F1FE5BBD"
    },
    "cell_type" : "markdown",
    "source" : "Write the selection to a VCF file again:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "0C6E6A5A15D14B4A85BD6A7983CDA31B"
    },
    "cell_type" : "code",
    "source" : "saveAsVcf(selection, \"data/subsettedVCF.vcf\")",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "Export ok, please find you file in data/subsettedVCF1.vcf\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 121
    } ]
  }, {
    "metadata" : {
      "id" : "2C612C679E4845B6A7996621498B1F3F"
    },
    "cell_type" : "markdown",
    "source" : "Check the contents of the file using only Spark/Scala functionality:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab300562297-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "6A1B7B4376294C39BA0B1453F046CD56"
    },
    "cell_type" : "code",
    "source" : "sc.textFile(\"data/subsettedVCF.vcf\").filter(!_.contains(\"##\")).map(_.split(\"\\t\")).take(5)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res185: Array[Array[String]] = Array(Array(#CHROM, POS, ID, REF, ALT, QUAL, FILTER, INFO, FORMAT, HCC1143), Array(19, 11218226, ., G, A, ., ., ., GT:AD:DP:GQ:PL, 1/1:1,39:40:85:256,85,0), Array(19, 11218361, ., G, A, ., ., ., GT:AD:DP:GQ:PL, 0/1:1,4:5:20:114,0,20), Array(19, 11221180, ., A, G, ., ., ., GT:AD:DP:GQ:PL, 1/1:0,12:12:36:256,36,0), Array(19, 11221454, ., T, C, ., ., ., GT:AD:DP:GQ:PL, 1/1:0,81:81:99:256,256,0))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon3e073c734bb25ed51931b529867e484a&quot;,&quot;dataInit&quot;:[{},{},{},{},{}],&quot;genId&quot;:&quot;300562297&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul300562297\"><li>\n                <a href=\"#tab300562297-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab300562297-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab300562297\"><div class=\"tab-pane\" id=\"tab300562297-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon8f06c5c1eaecf9e450fa0eaa15309cc8&quot;,&quot;dataInit&quot;:[{},{},{},{},{}],&quot;genId&quot;:&quot;1355055686&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon12dcc414caad5c1b5ca326b70556b1d2&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anondd4510a01207c23400a8922502f2cf29&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab300562297-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon9087941760e6019591c1689322e6384a&quot;,&quot;dataInit&quot;:[{},{},{},{},{}],&quot;genId&quot;:&quot;882338484&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon782e49c4f0d8d5fec74c2129b6491cd5&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon9bd1efbc59731bea02700cd50441c5ed&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 123
    } ]
  }, {
    "metadata" : {
      "id" : "F45E638862CC49AAA5EB2CFDC2E37B67"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "3E32FCCC4C454DD7A443C28D469837D0"
    },
    "cell_type" : "markdown",
    "source" : "## Merge VCF Files"
  }, {
    "metadata" : {
      "id" : "16D74F692DC940BA8021E1665565738C"
    },
    "cell_type" : "markdown",
    "source" : "In what follows, we implement a naive version of VCF merge. We just concatenate (aka `union`) the two sets of variants.\n\nSee also [here](https://groups.google.com/forum/#!topic/adam-developers/QgHXoaoycA4) for more details."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "E0722D2EDB8E47ABA4E39B08D0C8C1A6"
    },
    "cell_type" : "code",
    "source" : "val workDir = \"data/pairedSamples/ExomeRNA/\"\nval vcf1     = workDir + \"HCC1143-RNA-08.ann.vcf\"\nval vcf2     = workDir + \"HCC1143-DNA-08.ann.vcf\"\n\nval genotypes1 = sc.loadAnnotatedGenotypes(vcf1, None)\nval genotypes2 = sc.loadAnnotatedGenotypes(vcf2, None)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "workDir: String = data/pairedSamples/ExomeRNA/\nvcf1: String = data/pairedSamples/ExomeRNA/HCC1143-RNA-08.ann.vcf\nvcf2: String = data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\ngenotypes1: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[262] at flatMap at SnpEffContext.scala:94\ngenotypes2: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[264] at flatMap at SnpEffContext.scala:94\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 190
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "38CC9AF8F71542B08F97952C5947043C"
    },
    "cell_type" : "code",
    "source" : "val genotypes = genotypes1 union genotypes2",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "genotypes: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = UnionRDD[265] at union at <console>:124\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 191
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "F245EE2858F74CBD833B9E9E0C593529"
    },
    "cell_type" : "code",
    "source" : "println(\"# Records in vcf1 : \" + genotypes1.count)\nprintln(\"# Records in vcf2 : \" + genotypes2.count)\nprintln(\"# Records in union: \" + genotypes.count)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "# Records in vcf1 : 214014\n# Records in vcf2 : 101937\n# Records in union: 315951\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 192
    } ]
  }, {
    "metadata" : {
      "id" : "A1488C5626CC4296A49601DCB4E4204E"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "D05CEA9FDA2642DB8B65C89540426F80"
    },
    "cell_type" : "markdown",
    "source" : "## TODO: Filter on Region"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "B851FBB2BA6E469BB15546677D4D158A"
    },
    "cell_type" : "code",
    "source" : "val workDir = \"data/pairedSamples/ExomeRNA/\"\nval vcf     = workDir + \"HCC1143-DNA-08.ann.vcf\"\n\nval genotypes = sc.loadAnnotatedGenotypes(vcf, None)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "workDir: String = data/pairedSamples/ExomeRNA/\nvcf: String = data/pairedSamples/ExomeRNA/HCC1143-DNA-08.ann.vcf\ngenotypes: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[270] at flatMap at SnpEffContext.scala:94\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 214
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "1C97413283EB4F7FB3F73C848CE6E35C"
    },
    "cell_type" : "code",
    "source" : "import org.bdgenomics.adam.models._\n\nval filterRegion = ReferenceRegion(\"1\", 50000, 100000)\nval filterPosition = ReferencePosition(\"1\", 69269)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "import org.bdgenomics.adam.models._\nfilterRegion: org.bdgenomics.adam.models.ReferenceRegion = ReferenceRegion(1,50000,100000,Independent)\nfilterPosition: org.bdgenomics.adam.models.ReferencePosition = ReferenceRegion(1,69269,69270,Independent)\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 248
    } ]
  }, {
    "metadata" : {
      "id" : "F138B0BDD6EB41C389651F218EAC8F1B"
    },
    "cell_type" : "markdown",
    "source" : "ADAM provides an API to work with regions and positions:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "D0BD32E390F440E7BD76C64CCE91E229"
    },
    "cell_type" : "code",
    "source" : "filterRegion.contains(filterPoint)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res321: Boolean = true\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "true"
      },
      "output_type" : "execute_result",
      "execution_count" : 211
    } ]
  }, {
    "metadata" : {
      "id" : "B2990A0B2726415084B2B953747E8E6C"
    },
    "cell_type" : "markdown",
    "source" : "Extract a region/position from a `AnnotatedGenotype`s "
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "01D22587D418413491394939546372F1"
    },
    "cell_type" : "code",
    "source" : "def extractRegion(g: AnnotatedGenotype): ReferenceRegion = {\n    val variant = g.getGenotype.getVariant\n\n    ReferenceRegion(\n      variant.getContig.getContigName,\n      variant.getStart,\n      variant.getEnd)\n  }\n\ndef extractPosition(g: AnnotatedGenotype): ReferencePosition = {\n    val variant = g.getGenotype.getVariant\n\n    ReferencePosition(\n      variant.getContig.getContigName,\n      variant.getStart)\n  }",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "extractRegion: (g: org.tmoerman.adam.fx.avro.AnnotatedGenotype)org.bdgenomics.adam.models.ReferenceRegion\nextractPosition: (g: org.tmoerman.adam.fx.avro.AnnotatedGenotype)org.bdgenomics.adam.models.ReferencePosition\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 236
    } ]
  }, {
    "metadata" : {
      "id" : "D1005E8CD54E4D6E87996B9930DC4EED"
    },
    "cell_type" : "markdown",
    "source" : "A function encapsulating the logic in order to filter on a specified region and position. It's an easy excercise to extend this to multiple regions."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "C64C8E57F9B64647803CE634EDA733F0"
    },
    "cell_type" : "code",
    "source" : "def filterByRegion(rdd:RDD[AnnotatedGenotype], tregion:ReferenceRegion) = {\n  val addPositions = rdd.map(g => (extractPosition(g), g))\n  addPositions\n    .filter{case (pos, av) => tregion.contains(pos)}\n    .map(_._2)\n}\n\ndef filterByPosition(rdd:RDD[AnnotatedGenotype], position:ReferencePosition) = {\n  val addPositions = rdd.map(g => (extractPosition(g), g))\n  addPositions\n    .filter{case (pos, av) => position == pos}\n    .map(_._2)\n}",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "filterByRegion: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], tregion: org.bdgenomics.adam.models.ReferenceRegion)org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype]\nfilterByPosition: (rdd: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype], position: org.bdgenomics.adam.models.ReferencePosition)org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype]\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 245
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1433217440-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "8CA6FB8720544E8BB0F68872C4B6CDF6"
    },
    "cell_type" : "code",
    "source" : "printTable(filterByRegion(genotypes, filterRegion))",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res362: Array[(String, Long, Long, String, String, scala.collection.immutable.Set[String], scala.collection.immutable.Set[String])] = Array((1,69269,69270,A,G,Set(OR4F5),Set(ENSG00000186092)), (1,69510,69511,A,G,Set(OR4F5),Set(ENSG00000186092)), (1,69760,69761,A,T,Set(OR4F5),Set(ENSG00000186092)))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon3c31aeb2f53ee01cba1c1fdb4741c4f4&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69511,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69510,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69761,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69760,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;T&quot;}],&quot;genId&quot;:&quot;1433217440&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1433217440\"><li>\n                <a href=\"#tab1433217440-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1433217440-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1433217440\"><div class=\"tab-pane\" id=\"tab1433217440-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon33d5985c466f4173276cd98a138c77a1&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69511,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69510,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69761,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69760,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;T&quot;}],&quot;genId&quot;:&quot;1802486982&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\",\"_3\",\"_4\",\"_5\",\"_6\",\"_7\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonb874216859ef51ccd27b571b63274408&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon5c016e3b04ffe38015bd4a9e42975e31&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1433217440-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anonb085a56b8c2eac09c34a03c7071bedf5&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69511,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69510,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;},{&quot;_3&quot;:69761,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69760,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;T&quot;}],&quot;genId&quot;:&quot;1488612638&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonfebcea03ec3703d684865473b5457e50&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonb624acb7cd0e39de8bc86d257319d697&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 241
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "presentation" : {
        "tabs_state" : "{\n  \"tab_id\": \"#tab1459664311-0\"\n}",
        "pivot_chart_state" : "{\n  \"hiddenAttributes\": [],\n  \"menuLimit\": 200,\n  \"cols\": [],\n  \"rows\": [],\n  \"vals\": [],\n  \"exclusions\": {},\n  \"inclusions\": {},\n  \"unusedAttrsVertical\": 85,\n  \"autoSortUnusedAttrs\": false,\n  \"inclusionsInfo\": {},\n  \"aggregatorName\": \"Count\",\n  \"rendererName\": \"Table\"\n}"
      },
      "id" : "8CA6FB8720544E8BB0F68872C4B6CDF6"
    },
    "cell_type" : "code",
    "source" : "printTable(filterByPosition(genotypes, filterPosition))",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "res372: Array[(String, Long, Long, String, String, scala.collection.immutable.Set[String], scala.collection.immutable.Set[String])] = Array((1,69269,69270,A,G,Set(OR4F5),Set(ENSG00000186092)))\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : "<div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon23e44bdd6f90620b5d20dbeb96a398ca&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;1459664311&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tabs'], \n      function(playground, _magictabs) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictabs,\n    \"o\": {}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <div>\n          <ul class=\"nav nav-tabs\" id=\"ul1459664311\"><li>\n                <a href=\"#tab1459664311-0\"><i class=\"fa fa-table\"/></a>\n              </li><li>\n                <a href=\"#tab1459664311-1\"><i class=\"fa fa-cubes\"/></a>\n              </li></ul>\n\n          <div class=\"tab-content\" id=\"tab1459664311\"><div class=\"tab-pane\" id=\"tab1459664311-0\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon48c5fe7aac64af13d8be8c4a19656004&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;4349764&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/tableChart'], \n      function(playground, _magictableChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magictableChart,\n    \"o\": {\"headers\":[\"_1\",\"_2\",\"_3\",\"_4\",\"_5\",\"_6\",\"_7\"],\"width\":600,\"height\":400}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anon29ce1f47b24164481c51929606d868ea&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonde46cc54ef8effd2132dcda2bfadd40f&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div><div class=\"tab-pane\" id=\"tab1459664311-1\">\n              <div>\n      <script data-this=\"{&quot;dataId&quot;:&quot;anon3bfc0588a795647d15cbd4e8abea0dcd&quot;,&quot;dataInit&quot;:[{&quot;_3&quot;:69270,&quot;_7&quot;:[&quot;ENSG00000186092&quot;],&quot;_2&quot;:69269,&quot;_6&quot;:[&quot;OR4F5&quot;],&quot;_1&quot;:&quot;1&quot;,&quot;_4&quot;:&quot;A&quot;,&quot;_5&quot;:&quot;G&quot;}],&quot;genId&quot;:&quot;952950879&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/req(['../javascripts/notebook/playground','../javascripts/notebook/magic/pivotChart'], \n      function(playground, _magicpivotChart) {\n        // data ==> data-this (in observable.js's scopedEval) ==> this in JS => { dataId, dataInit, ... }\n        // this ==> scope (in observable.js's scopedEval) ==> this.parentElement ==> div.container below (toHtml)\n\n        playground.call(data,\n                        this\n                        ,\n                        {\n    \"f\": _magicpivotChart,\n    \"o\": {\"width\":600,\"height\":400,\"derivedAttributes\":{},\"extraOptions\":{}}\n  }\n  \n                        \n                        \n                      );\n      }\n    );/*]]>*/</script>\n    <div>\n        <p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anoncd2e30c69d1aad6079096648aae8592d&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p> <span style=\"color:red\"><p data-bind=\"text: value\"><script data-this=\"{&quot;valueId&quot;:&quot;anonea646b39b9287415ec10b10c17f87e51&quot;}\" type=\"text/x-scoped-javascript\">/*<![CDATA[*/\nreq(\n['observable', 'knockout'],\nfunction (O, ko) {\n  ko.applyBindings({\n      value: O.makeObservable(valueId)\n    },\n    this\n  );\n});\n        /*]]>*/</script></p></span>\n        <div>\n        </div>\n      </div></div>\n              </div></div>\n        </div>\n      </div></div>"
      },
      "output_type" : "execute_result",
      "execution_count" : 249
    } ]
  }, {
    "metadata" : {
      "id" : "1D73F14212194C7989691CA275F57D18"
    },
    "cell_type" : "markdown",
    "source" : "- - -"
  }, {
    "metadata" : {
      "id" : "D7D7C56950804D37AC5B962F248572D1"
    },
    "cell_type" : "markdown",
    "source" : "## Split VCF Files"
  }, {
    "metadata" : {
      "id" : "E4B079E51AB24C638E86126824A98B4E"
    },
    "cell_type" : "markdown",
    "source" : "Splitting VCF files based on genes, contigs or a position can easily be implemented given the above functionality.\n\nThe procedure below does just that. Please note that the breakpoint is included in the _left_ group, not in the right one. Obviously this behaviour can be changed by changing the definitions of `leftRegion` and `rightRegion`."
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "B33AB4527BDB4B0386A0B661D8DDC6F8"
    },
    "cell_type" : "code",
    "source" : "val contig = \"1\"\nval breakPoint = 69760\n\n// Select contig '1'\nval contig1 = filterByContigList(genotypes, List(contig))\n\n// Define the regions to filter on. The right region is a bit of a hack, but who cares?!\nval leftRegion = ReferenceRegion(contig, 0, breakPoint + 1)\nval rightRegion = ReferenceRegion(contig, breakPoint + 1, 1000000000)\n\n// Given a breakpoint, select left and right:\nval left = filterByRegion(contig1, leftRegion)\nval right = filterByRegion(contig1, rightRegion)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "contig: String = 1\nbreakPoint: Int = 69760\ncontig1: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[309] at filter at <console>:137\nleftRegion: org.bdgenomics.adam.models.ReferenceRegion = ReferenceRegion(1,0,69761,Independent)\nrightRegion: org.bdgenomics.adam.models.ReferenceRegion = ReferenceRegion(1,69761,1000000000,Independent)\nleft: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[312] at map at <console>:138\nright: org.apache.spark.rdd.RDD[org.tmoerman.adam.fx.avro.AnnotatedGenotype] = MapPartitionsRDD[315] at map at <console>:138\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 262
    } ]
  }, {
    "metadata" : {
      "id" : "FD83205BB97849E1B3A84A01540ECC47"
    },
    "cell_type" : "markdown",
    "source" : "A quick check:"
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : false,
      "id" : "87C70C9FC8E54D00933D1CA3F0F50865"
    },
    "cell_type" : "code",
    "source" : "println(\"Left of split:  \" + left.count)\nprintln(\"Right of split: \" + right.count)\nprintln(\"Left + Right:   \" + (left.count + right.count))\nprintln(\"Total:          \" + contig1.count)",
    "outputs" : [ {
      "name" : "stdout",
      "output_type" : "stream",
      "text" : "Left of split:  3\nRight of split: 10303\nLeft + Right:   10306\nTotal:          10306\n"
    }, {
      "metadata" : { },
      "data" : {
        "text/html" : ""
      },
      "output_type" : "execute_result",
      "execution_count" : 268
    } ]
  }, {
    "metadata" : {
      "trusted" : true,
      "input_collapsed" : false,
      "collapsed" : true,
      "id" : "F65CD4E1496A46738F1AF490E0FA0444"
    },
    "cell_type" : "code",
    "source" : "",
    "outputs" : [ ]
  } ],
  "nbformat" : 4
}